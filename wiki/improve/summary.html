<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>01. 综述 | matman.js</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/matman/logo.png">
    <meta name="description" content="web 端对端测试解决方案">
    <link rel="preload" href="/matman/assets/css/0.styles.0d11d232.css" as="style"><link rel="preload" href="/matman/assets/js/app.81349c31.js" as="script"><link rel="preload" href="/matman/assets/js/10.f3bcbe52.js" as="script"><link rel="preload" href="/matman/assets/js/2.86e1d117.js" as="script"><link rel="preload" href="/matman/assets/js/1.7d57fb73.js" as="script"><link rel="preload" href="/matman/assets/js/5.c4a10ce8.js" as="script"><link rel="prefetch" href="/matman/assets/js/11.0019b3f4.js"><link rel="prefetch" href="/matman/assets/js/12.086f1fd4.js"><link rel="prefetch" href="/matman/assets/js/13.e8beec12.js"><link rel="prefetch" href="/matman/assets/js/14.feaa84ee.js"><link rel="prefetch" href="/matman/assets/js/15.1d360b2b.js"><link rel="prefetch" href="/matman/assets/js/16.1ba8d978.js"><link rel="prefetch" href="/matman/assets/js/17.08db7392.js"><link rel="prefetch" href="/matman/assets/js/18.910b8a95.js"><link rel="prefetch" href="/matman/assets/js/19.2c924def.js"><link rel="prefetch" href="/matman/assets/js/20.ff678f1c.js"><link rel="prefetch" href="/matman/assets/js/21.3130e26f.js"><link rel="prefetch" href="/matman/assets/js/22.76efc76b.js"><link rel="prefetch" href="/matman/assets/js/23.f86e6a4a.js"><link rel="prefetch" href="/matman/assets/js/24.7a568946.js"><link rel="prefetch" href="/matman/assets/js/25.444239b0.js"><link rel="prefetch" href="/matman/assets/js/26.f22357d3.js"><link rel="prefetch" href="/matman/assets/js/27.aeb074e6.js"><link rel="prefetch" href="/matman/assets/js/28.c74ac9ea.js"><link rel="prefetch" href="/matman/assets/js/29.e8bf71ad.js"><link rel="prefetch" href="/matman/assets/js/30.6684c193.js"><link rel="prefetch" href="/matman/assets/js/31.383b468d.js"><link rel="prefetch" href="/matman/assets/js/32.a935e0da.js"><link rel="prefetch" href="/matman/assets/js/33.cd4747d8.js"><link rel="prefetch" href="/matman/assets/js/34.02bfa986.js"><link rel="prefetch" href="/matman/assets/js/35.33163507.js"><link rel="prefetch" href="/matman/assets/js/36.77e6ad2a.js"><link rel="prefetch" href="/matman/assets/js/37.11f8a2fb.js"><link rel="prefetch" href="/matman/assets/js/4.1d6ce482.js"><link rel="prefetch" href="/matman/assets/js/6.27c6408e.js"><link rel="prefetch" href="/matman/assets/js/7.1d7e69de.js"><link rel="prefetch" href="/matman/assets/js/8.76e9854d.js"><link rel="prefetch" href="/matman/assets/js/9.32741ec1.js">
    <link rel="stylesheet" href="/matman/assets/css/0.styles.0d11d232.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container fastest-docs-container"><!----> <header style="background-color:rgba(255, 255, 255, 1);box-shadow:0px 2px 30px 0px rgba(0, 0, 0, 0.1);" data-v-e3902e94><nav data-v-e3902e94><a href="/matman/" class="router-link-active" data-v-e3902e94><img src="/matman/assets/img/logo_100.285fceb1.png" alt="logo" style="height:50px;" data-v-e3902e94></a> <ul class="navs" data-v-e3902e94><li class="nav" data-v-e3902e94><a href="/matman/wiki/" class="router-link-active nav__link--white" style="color:rgba(102, 102, 102, 1);" data-v-e3902e94>web端对端测试方案
                </a> <!----></li><li class="nav" data-v-e3902e94><a href="/matman/api/" class="nav__link--white" style="color:rgba(102, 102, 102, 1);" data-v-e3902e94>API手册
                </a> <!----></li><li class="nav" data-v-e3902e94><a href="/matman/tool/" class="nav__link--white" style="color:rgba(102, 102, 102, 1);" data-v-e3902e94>工具
                </a> <!----></li><li class="nav" data-v-e3902e94><a href="/matman/release/" class="nav__link--white" style="color:rgba(102, 102, 102, 1);" data-v-e3902e94>发布日志
                </a> <!----></li><li class="nav" data-v-e3902e94><a href="https://github.com/matmanjs/matman/issues" target="_blank" rel="noopener noreferrer" class="nav__link--white" style="color:rgba(102, 102, 102, 1);" data-v-e3902e94>Issues</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-e3902e94 data-v-e3902e94><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></li></ul></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/matman/wiki/" aria-current="page" class="sidebar-link">关于 matman</a></li><li><a href="/matman/wiki/install.html" class="sidebar-link">安装和升级</a></li><li><section class="sidebar-group depth-0"><a href="/matman/wiki/getting-started/" class="sidebar-heading clickable"><span>快速入门</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/matman/wiki/getting-started/baidu_01.html" class="sidebar-link">01. 第一个端对端测试</a></li><li><a href="/matman/wiki/getting-started/baidu_02.html" class="sidebar-link">02. 测试用户交互</a></li><li><a href="/matman/wiki/getting-started/baidu_03.html" class="sidebar-link">03. 更多例子</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>深入</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matman/wiki/improve/summary.html" aria-current="page" class="active sidebar-link">01. 综述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/matman/wiki/improve/summary.html#_1-技术概览" class="sidebar-link">1. 技术概览</a></li><li class="sidebar-sub-header"><a href="/matman/wiki/improve/summary.html#_2-目录结构" class="sidebar-link">2. 目录结构</a></li><li class="sidebar-sub-header"><a href="/matman/wiki/improve/summary.html#_3-运行" class="sidebar-link">3. 运行</a></li><li class="sidebar-sub-header"><a href="/matman/wiki/improve/summary.html#_4-运行结果" class="sidebar-link">4. 运行结果</a></li></ul></li><li><a href="/matman/wiki/improve/simple.html" class="sidebar-link">02. 简单静态页面</a></li><li><a href="/matman/wiki/improve/transaction.html" class="sidebar-link">03. 单一接口展示型页面</a></li><li><a href="/matman/wiki/improve/withdraw.html" class="sidebar-link">04. 重交互界面</a></li><li><a href="/matman/wiki/improve/jsBridge.html" class="sidebar-link">05. JSBridge</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基本理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matman/wiki/basic-concepts/page-snapshot.html" class="sidebar-link">页面快照</a></li><li><a href="/matman/wiki/basic-concepts/data-snapshot.html" class="sidebar-link">数据快照</a></li><li><a href="/matman/wiki/basic-concepts/test-by-mock.html" class="sidebar-link">基于白盒数据测试数据快照</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>FAQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matman/wiki/faq/common.html" class="sidebar-link">常见问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_01-综述"><a href="#_01-综述" class="header-anchor">#</a> 01. 综述</h1> <p>从本节开始，我们将结合一个包含了<code>简单静态页面</code>、<code>单一接口展示型界面</code>、<code>重交互性界面</code>、<code>Hybrid APP</code>的 React 项目学习 matman 的使用方法。</p> <h2 id="_1-技术概览"><a href="#_1-技术概览" class="header-anchor">#</a> 1. 技术概览</h2> <h3 id="_1-1-matman"><a href="#_1-1-matman" class="header-anchor">#</a> 1.1 matman</h3> <p><a href="https://github.com/matmanjs/matman" target="_blank" rel="noopener noreferrer">matman<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个用于<strong>web 端对端测试</strong>（E2E，End-to-End Testing）的框架，它提供了一整套方案，十分适合 web 前端开发人员来编写端对端测试。拥有更适合 <strong>web 前端开发者使用</strong>、<strong>更适合单页面的精细化测试</strong>等特点。</p> <h3 id="_1-2-mockstar"><a href="#_1-2-mockstar" class="header-anchor">#</a> 1.2 mockstar</h3> <p><a href="https://github.com/mockstarjs/mockstar" target="_blank" rel="noopener noreferrer">mockStar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个用于<strong>构造及管理桩数据</strong>（模拟数据）的工具。也是我们推荐的数据 Mock 工具。</p> <p>它具有以下特点：</p> <ul><li>支持多种方式灵活构造桩数据</li> <li>支持独立的管理端自由切换不同桩数据</li> <li>支持基于 XHR 场景的数据打桩</li> <li>支持异步调用场景（例如 JSBridge 异步回调等）的数据打桩</li> <li>支持 E2E（端对端）测试等场景</li></ul> <h3 id="_1-3-whistle"><a href="#_1-3-whistle" class="header-anchor">#</a> 1.3 whistle</h3> <p><a href="https://github.com/avwo/whistle" target="_blank" rel="noopener noreferrer">whistle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是基于 Node 实现的跨平台 Web 调试代理工具，类似的工具有 Windows 平台上的<a href="http://www.telerik.com/fiddler/" target="_blank" rel="noopener noreferrer">Fiddler<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，主要用于查看、修改 HTTP、HTTPS、Websocket 的请求、响应，也可以作为 HTTP 代理服务器使用，不同于 Fiddler 通过断点修改请求响应的方式，whistle 采用的是类似配置系统 hosts 的方式，一切操作都可以通过配置实现，支持域名、路径、正则表达式、通配符、通配路径等多种<a href="https://wproxy.org/whistle/pattern.html" target="_blank" rel="noopener noreferrer">匹配方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，且可以通过 Node 模块<a href="https://wproxy.org/whistle/plugins.html" target="_blank" rel="noopener noreferrer">扩展功能<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <img src="/matman/assets/img/whistle.677116c5.png" alt="基本功能" style="zoom:25%;"> <p>同样 mockstar 同样是我们推荐的数据 mock 工具。</p> <h2 id="_2-目录结构"><a href="#_2-目录结构" class="header-anchor">#</a> 2. 目录结构</h2> <div class="language-text extra-class"><pre class="language-text"><code>.
├── DevOps
│   ├── devops-app
│   ├── matman-app
│   ├── mockstar-app
│   └── whistle
├── LICENSE
├── README.md
├── config-overrides.js
├── package-lock.json
├── package.json
├── public
├── src
└── test
    ├── e2e
    └── unit
</code></pre></div><h3 id="_2-1-devops"><a href="#_2-1-devops" class="header-anchor">#</a> 2.1 DevOps</h3> <blockquote><p>包含了我们执行测试需要的所有文件，其中 mockstar-app 与 whistle 如果大家不需要数据 mock 以及网络代理可以忽略，我们接下来的文章也不会着重介绍这俩部分。</p></blockquote> <ul><li>devops-app：执行测试的总控程序，在这个程序中我们执行<strong>文件清理、构建环境、执行测试、文件归档</strong>等操作</li> <li>matman-app：主要执行 E2E 测试，捕捉<strong>数据快照</strong></li> <li>mockstar-app：生成 mock 数据，进行测试</li> <li>whistle：向全局的 whistle 中<strong>添加代理规则</strong></li></ul> <h3 id="_2-2-test"><a href="#_2-2-test" class="header-anchor">#</a> 2.2 test</h3> <p>本文件夹中我们编写测试用例：</p> <ul><li>e2e：端到端测试的测试用例文件</li> <li>unit：单元测试用例文件</li></ul> <h2 id="_3-运行"><a href="#_3-运行" class="header-anchor">#</a> 3. 运行</h2> <h3 id="_3-1-启动过程"><a href="#_3-1-启动过程" class="header-anchor">#</a> 3.1 启动过程</h3> <img src="/matman/assets/img/yuque_diagram.35d8dac4.png" alt="yuque_diagram" style="zoom:50%;"> <p>启动过程如上图所示：</p> <ol><li>判断端口是否被占用，若被占用则杀掉占用进程</li> <li>构建被测试的项目</li> <li>启动 mockstar 与 whistle</li> <li>执行测试，输出文件</li></ol> <h3 id="_3-2-启动命令"><a href="#_3-2-启动命令" class="header-anchor">#</a> 3.2 启动命令</h3> <p>在终端中执行下面的命令即可查看效果：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token builtin class-name">test</span>
</code></pre></div><h2 id="_4-运行结果"><a href="#_4-运行结果" class="header-anchor">#</a> 4. 运行结果</h2> <p>执行 <code>npm test</code> 命令，我们可以在 <code>/DevOps/devops-app/output</code> 文件夹中查看所有的输出文件，一般情况下用浏览器打开 <strong>index.html</strong> 即可</p> <h3 id="_4-1-综合入口"><a href="#_4-1-综合入口" class="header-anchor">#</a> 4.1 综合入口</h3> <h4 id="_4-1-1-概览"><a href="#_4-1-1-概览" class="header-anchor">#</a> 4.1.1 概览</h4> <img src="/matman/assets/img/image-20200521164526840.eb7b5adf.png" alt="image-20200521164526840" style="zoom:30%;"> <p>输出文件会包括下面几部分：</p> <ul><li><strong>单元测试</strong> <ul><li>单元测试报告</li> <li>单元测试覆盖率报告</li></ul></li> <li><strong>端到端测试</strong> <ul><li>端到端测试报告</li> <li>端到端测试覆盖率报告</li></ul></li> <li>所有文件的压缩包</li> <li>测试生成的 JSON 结果</li> <li>whistle 的代理规则</li></ul> <h4 id="_4-1-2-文件目录"><a href="#_4-1-2-文件目录" class="header-anchor">#</a> 4.1.2 文件目录</h4> <p>下面，我们给出 <code>output</code> 的目录结构：</p> <div class="language-text extra-class"><pre class="language-text"><code>.
├── e2e_test_build_output
│   ├── crawler-script
│   ├── matman_result_output
│   └── screenshot_output
├── e2e_test_report
│   ├── assets
│   ├── coverage
│   ├── mocha-multi-reporters-config.json
│   ├── mochawesome.html
│   ├── mochawesome.json
│   └── test-result.xml
├── index-html.json
├── index.html
├── output.zip
├── test-record.json
├── test.whistle.js
└── unit_test_report
    ├── assets
    ├── coverage
    ├── mocha-multi-reporters-config.json
    ├── mochawesome.html
    ├── mochawesome.json
    └── test-result.xml
</code></pre></div><h5 id="e2e-test-build-output"><a href="#e2e-test-build-output" class="header-anchor">#</a> e2e_test_build_output</h5> <ul><li>crawler-script：页面爬虫脚本</li> <li>matman_result_output：中间结果json</li> <li>screenshot_output：屏幕截图结果</li></ul> <h5 id="e2e-test-report"><a href="#e2e-test-report" class="header-anchor">#</a> e2e_test_report</h5> <p>端到端测试生成的测试报告与覆盖率报告</p> <h5 id="unit-test-report"><a href="#unit-test-report" class="header-anchor">#</a> unit_test_report</h5> <p>单元测试生成的测试报告与覆盖率报告</p> <h3 id="_4-2-单元测试（ut）"><a href="#_4-2-单元测试（ut）" class="header-anchor">#</a> 4.2 单元测试（UT）</h3> <p>测试报告：</p> <img src="/matman/assets/img/image-20200521170634535.82eecc9f.png" alt="image-20200521170634535" style="zoom:15%;"> <p>覆盖率报告：</p> <img src="/matman/assets/img/image-20200521170713829.a5a16b53.png" alt="image-20200521170713829" style="zoom:15%;"> <h3 id="_4-3-端到端测试（e2e）"><a href="#_4-3-端到端测试（e2e）" class="header-anchor">#</a> 4.3 端到端测试（E2E）</h3> <p>测试报告：</p> <img src="/matman/assets/img/image-20200521170748125.c1d8f3f3.png" alt="image-20200521170748125" style="zoom:15%;"> <p>覆盖率报告：</p> <img src="/matman/assets/img/image-20200521170824202.80c6ed42.png" alt="image-20200521170824202" style="zoom:15%;"></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matman/wiki/getting-started/baidu_03.html" class="prev">
        03. 更多例子
      </a></span> <span class="next"><a href="/matman/wiki/improve/simple.html">
        02. 简单静态页面
      </a>
      →
    </span></p></div> </main> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/matman/assets/js/app.81349c31.js" defer></script><script src="/matman/assets/js/10.f3bcbe52.js" defer></script><script src="/matman/assets/js/2.86e1d117.js" defer></script><script src="/matman/assets/js/1.7d57fb73.js" defer></script><script src="/matman/assets/js/5.c4a10ce8.js" defer></script>
  </body>
</html>
